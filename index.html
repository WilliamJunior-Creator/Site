<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cortex Duo</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/mS4p0Gz/cortex-Photoroom.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .hero-bg {
             background-color: rgba(10, 25, 47, 0.9); /* Azul escuro semi-transparente */
        }
        .cta-button {
            transition: all 0.3s ease;
        }
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(249, 115, 22, 0.3); /* Laranja */
        }
        .service-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .service-card:hover {
            transform: translateY(-5px);
            border-color: #f97316 !important;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .case-study-card {
            background-color: #172a45;
        }
        #contact-modal, #chat-widget-window, #service-modal { 
            transition: opacity 0.3s ease, transform 0.3s ease; 
        }
        
        #chat-widget-window.active {
            transform: translateY(0) scale(1);
            opacity: 1;
            visibility: visible;
        }
         #chat-widget-window {
            transform: translateY(20px) scale(0.95);
            opacity: 0;
            visibility: hidden;
        }
        .idea-card {
            border-left: 4px solid #f97316; /* Laranja */
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-slate-900 text-gray-800 dark:text-gray-200">
    <!-- Vídeo de Fundo -->
    <div class="fixed inset-0 z-[-1] opacity-40">
        <video preload="auto" muted playsinline id="bg-video" class="w-full h-full object-cover">
            <source src="https://videos.pexels.com/video-files/3209828/3209828-hd_1920_1080_25fps.mp4" type="video/mp4">
            Seu navegador não suporta vídeos.
        </video>
    </div>


    <!-- Cabeçalho e Navegação -->
    <header class="bg-slate-900/80 backdrop-blur-sm sticky top-0 z-40 shadow-md">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center gap-2">
                <span class="text-white text-2xl font-bold">Cortex<span class="text-orange-500">Duo</span></span>
            </a>
            <div class="hidden md:flex space-x-8 items-center">
                <a href="#services" class="text-gray-300 hover:text-orange-400 transition-colors">Serviços</a>
                <a href="#brainstorm" class="text-gray-300 hover:text-orange-400 transition-colors">Brainstorm IA</a>
                <a href="#examples" class="text-gray-300 hover:text-orange-400 transition-colors">Exemplos</a>
                <a href="#cases" class="text-gray-300 hover:text-orange-400 transition-colors">Cases de Sucesso</a>
                <a href="#process" class="text-gray-300 hover:text-orange-400 transition-colors">Nosso Processo</a>
                <a href="#contact" class="bg-orange-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-orange-600 transition-colors">Fale Conosco</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden text-white">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                </svg>
            </button>
        </nav>
        <!-- Menu Mobile -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4">
            <a href="#services" class="block py-2 text-gray-300 hover:text-orange-400">Serviços</a>
            <a href="#brainstorm" class="block py-2 text-gray-300 hover:text-orange-400">Brainstorm IA</a>
            <a href="#examples" class="block py-2 text-gray-300 hover:text-orange-400">Exemplos</a>
            <a href="#cases" class="block py-2 text-gray-300 hover:text-orange-400">Cases de Sucesso</a>
            <a href="#process" class="block py-2 text-gray-300 hover:text-orange-400">Nosso Processo</a>
            <a href="#contact" class="block mt-2 bg-orange-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-orange-600 text-center">Fale Conosco</a>
        </div>
    </header>

    <main>
        <!-- Seção Hero -->
        <section data-video-time="0" class="hero-bg text-white page-section">
            <div class="container mx-auto px-6 py-24 text-center">
                <h1 class="text-3xl sm:text-4xl md:text-6xl font-bold leading-tight mb-4">Revolucione seu Negócio com Automação e I.A.</h1>
                <p class="text-lg md:text-xl text-gray-300 max-w-3xl mx-auto mb-8">Especialistas em criar chatbots inteligentes e soluções de automação que otimizam processos, reduzem custos e elevam a experiência do seu cliente.</p>
                <a href="#contact" class="bg-orange-500 text-white font-bold py-3 px-8 rounded-lg text-lg cta-button inline-block">Agende uma Demonstração</a>
            </div>
        </section>

        <!-- Seção de Serviços -->
        <section id="services" data-video-time="5" class="py-20 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm page-section">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900 dark:text-white">Nossas Soluções de Automação</h2>
                    <p class="text-gray-600 dark:text-gray-400 mt-4 max-w-2xl mx-auto">Do atendimento ao cliente à análise de dados, criamos soluções personalizadas para os desafios da sua empresa.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Cards de serviço com icones laranja -->
                    <button data-service="atendimento" class="service-card text-left border-2 border-gray-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 rounded-lg p-6 shadow-lg">
                        <div class="flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 dark:bg-orange-900/50 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">Chatbots de Atendimento 24/7</h3>
                        <p class="text-gray-600 dark:text-gray-400">Automatize o suporte ao cliente com chatbots que resolvem dúvidas, abrem chamados e guiam usuários, disponíveis a qualquer hora do dia.</p>
                    </button>
                     <button data-service="vendas" class="service-card text-left border-2 border-gray-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 rounded-lg p-6 shadow-lg">
                         <div class="flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 dark:bg-orange-900/50 mb-4">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" /></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">Chatbots para Vendas e Leads</h3>
                        <p class="text-gray-600 dark:text-gray-400">Qualifique visitantes do seu site, agende reuniões e direcione leads para sua equipe de vendas de forma automática e eficiente.</p>
                    </button>
                    <button data-service="rpa" class="service-card text-left border-2 border-gray-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 rounded-lg p-6 shadow-lg">
                         <div class="flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 dark:bg-orange-900/50 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" /></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">Automação de Processos (RPA)</h3>
                        <p class="text-gray-600 dark:text-gray-400">Elimine tarefas manuais e repetitivas. Nossos robôs de software podem preencher formulários, extrair dados e integrar sistemas.</p>
                    </button>
                    <button data-service="ecommerce" class="service-card text-left border-2 border-gray-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 rounded-lg p-6 shadow-lg">
                         <div class="flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 dark:bg-orange-900/50 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">IA para E-commerce</h3>
                        <p class="text-gray-600 dark:text-gray-400">Implemente sistemas de recomendação de produtos, chatbots para recuperação de carrinho e análise de comportamento de compra.</p>
                    </button>
                    <button data-service="dados" class="service-card text-left border-2 border-gray-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 rounded-lg p-6 shadow-lg">
                         <div class="flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 dark:bg-orange-900/50 mb-4">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" /></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">Análise Preditiva e Dados</h3>
                        <p class="text-gray-600 dark:text-gray-400">Utilize IA para analisar grandes volumes de dados, identificar tendências, prever demandas e tomar decisões mais inteligentes.</p>
                    </button>
                    <button data-service="integracao" class="service-card text-left border-2 border-gray-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-900 rounded-lg p-6 shadow-lg">
                         <div class="flex items-center justify-center h-12 w-12 rounded-full bg-orange-100 dark:bg-orange-900/50 mb-4">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" /></svg>
                        </div>
                        <h3 class="text-xl font-bold mb-2 text-slate-900 dark:text-white">Integração com Sistemas</h3>
                        <p class="text-gray-600 dark:text-gray-400">Nossas soluções se integram perfeitamente com seus sistemas existentes (CRMs, ERPs, APIs) para um fluxo de trabalho unificado.</p>
                    </button>
                </div>
            </div>
        </section>

        <!-- Seção Brainstorm IA -->
        <section id="brainstorm" data-video-time="8" class="py-20 bg-slate-100/95 dark:bg-slate-900/95 backdrop-blur-sm page-section">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900 dark:text-white">Não sabe por onde começar?</h2>
                    <p class="text-gray-600 dark:text-gray-400 mt-4 max-w-2xl mx-auto">Descreva seu tipo de negócio e nossa IA irá gerar ideias de automação personalizadas para você.</p>
                </div>
                <div class="max-w-3xl mx-auto bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg">
                    <div class="flex flex-col sm:flex-row gap-4">
                        <input type="text" id="business-type-input" placeholder="Ex: cafeteria, clínica médica, e-commerce de moda" class="w-full bg-slate-50 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-3">
                        <button id="generate-ideas-button" class="bg-orange-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center gap-2 whitespace-nowrap">
                            Gerar Ideias com IA ✨
                        </button>
                    </div>
                    <div id="ideas-output" class="mt-8 space-y-6">
                        <!-- Loading spinner and results will be injected here -->
                    </div>
                </div>
            </div>
        </section>
        
        <!-- NOVA Seção de Exemplos -->
        <section id="examples" data-video-time="12" class="py-20 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm page-section">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900 dark:text-white">Veja a Mágica da IA em Ação</h2>
                    <p class="text-gray-600 dark:text-gray-400 mt-4 max-w-2xl mx-auto">Selecione o tipo de plano e veja a diferença entre um chatbot convencional e um com o poder da Inteligência Artificial.</p>
                </div>

                <div class="max-w-4xl mx-auto">
                    <!-- Seletores -->
                    <div class="max-w-md mx-auto mb-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-center">Selecione um tipo de plano:</label>
                            <div class="flex bg-white dark:bg-slate-800 rounded-lg p-1 border dark:border-slate-600">
                                <button data-plan="essencial" class="plan-selector flex-1 p-2 rounded-md text-sm font-semibold transition-colors bg-orange-500 text-white">Essencial (Sem IA)</button>
                                <button data-plan="inteligente" class="plan-selector flex-1 p-2 rounded-md text-sm font-semibold transition-colors text-gray-600 dark:text-gray-300">Inteligente (Com IA)</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Sub-seletores para Plano Inteligente -->
                    <div id="inteligente-options" class="hidden mb-4 max-w-md mx-auto">
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 text-center">Qual nível de IA você quer ver?</label>
                        <div class="flex bg-white dark:bg-slate-800 rounded-lg p-1 border dark:border-slate-600">
                            <button data-level="1" class="level-selector flex-1 p-2 rounded-md text-sm font-semibold transition-colors bg-blue-500 text-white">Nível 1</button>
                            <button data-level="2" class="level-selector flex-1 p-2 rounded-md text-sm font-semibold transition-colors text-gray-600 dark:text-gray-300">Nível 2</button>
                        </div>
                    </div>

                    <!-- Explicação Dinâmica -->
                    <div class="mt-6 text-center text-gray-600 dark:text-gray-400 min-h-[4em] px-4 max-w-2xl mx-auto">
                        <p id="dynamic-description-text" class="transition-opacity duration-300"></p>
                    </div>

                    <!-- Janela de Demonstração Única -->
                    <div id="chat-demo-container" class="bg-white dark:bg-slate-800 rounded-lg shadow-lg p-6 max-w-lg mx-auto mt-6">
                        <h3 id="demo-title" class="text-2xl font-bold text-slate-900 dark:text-white mb-1">Demonstração: Plano Essencial</h3>
                        <p id="demo-description" class="text-sm text-gray-500 dark:text-gray-400 mb-4">Baseado em regras. Não interpreta áudio, imagens ou texto fora do script.</p>
                        <div class="bg-gray-100 dark:bg-slate-700 rounded-lg p-4 h-64 sm:h-80 flex flex-col">
                            <div id="chat-messages" class="space-y-3">
                                <!-- Conteúdo do chat será inserido via JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Botão de Orçamento -->
                    <div class="text-center mt-8">
                        <a href="#contact" class="bg-orange-500 text-white font-bold py-3 px-8 rounded-lg text-lg cta-button inline-block">
                            Venha fazer um orçamento
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Seção de Cases de Sucesso -->
        <section id="cases" data-video-time="17" class="py-20 bg-slate-900/90 backdrop-blur-sm page-section">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-white">Resultados Reais para Nossos Clientes</h2>
                    <p class="text-gray-300 mt-4 max-w-2xl mx-auto">Veja como ajudamos empresas de diversos setores a alcançar a excelência operacional.</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Case 1 -->
                    <div class="case-study-card rounded-lg p-6 flex flex-col">
                        <h3 class="text-xl font-bold text-orange-400 mb-2">Varejista de Moda Online</h3>
                        <p class="text-gray-300 mb-4 flex-grow">Implementação de chatbot para suporte pós-venda, rastreio de pedidos e política de trocas.</p>
                        <div class="mt-auto">
                            <span class="text-2xl font-bold text-white">Redução de 40%</span>
                            <p class="text-orange-300">nos chamados de suporte nível 1.</p>
                        </div>
                    </div>
                    <!-- Case 2 -->
                    <div class="case-study-card rounded-lg p-6 flex flex-col">
                        <h3 class="text-xl font-bold text-orange-400 mb-2">Clínica de Saúde e Bem-estar</h3>
                        <p class="text-gray-300 mb-4 flex-grow">Chatbot no WhatsApp para agendamento, confirmação de consultas e respostas a dúvidas frequentes.</p>
                        <div class="mt-auto">
                            <span class="text-2xl font-bold text-white">Aumento de 25%</span>
                            <p class="text-orange-300">na taxa de agendamentos concluídos.</p>
                        </div>
                    </div>
                    <!-- Case 3 -->
                    <div class="case-study-card rounded-lg p-6 flex flex-col">
                        <h3 class="text-xl font-bold text-orange-400 mb-2">Empresa de Software (SaaS)</h3>
                        <p class="text-gray-300 mb-4 flex-grow">Automação (RPA) para a criação de contas de teste e onboarding de novos usuários, integrando com CRM.</p>
                        <div class="mt-auto">
                            <span class="text-2xl font-bold text-white">90% de economia</span>
                            <p class="text-orange-300">no tempo gasto em tarefas manuais de onboarding.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Seção Nosso Processo -->
        <section id="process" data-video-time="22" class="py-20 bg-white/95 dark:bg-slate-800/95 backdrop-blur-sm page-section">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-slate-900 dark:text-white">Nosso Caminho para o Sucesso</h2>
                    <p class="text-gray-600 dark:text-gray-400 mt-4 max-w-2xl mx-auto">Trabalhamos de forma colaborativa para garantir que a solução entregue seja perfeitamente alinhada aos seus objetivos.</p>
                </div>
                <div class="relative">
                     <!-- Linha do tempo -->
                    <div class="hidden md:block border-l-2 border-orange-500 absolute h-full top-0" style="left: 50%;"></div>
                    
                    <!-- Item 1 -->
                    <div class="mb-8 flex md:justify-between md:items-center w-full md:flex-row-reverse">
                        <div class="md:w-5/12 hidden md:flex justify-center items-center">
                            <div class="w-32 h-32 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />
                                </svg>
                            </div>
                        </div>
                        <div class="z-10 flex items-center bg-orange-500 shadow-xl w-8 h-8 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">1</h1>
                        </div>
                        <div class="bg-slate-100 dark:bg-slate-700 md:w-5/12 p-6 rounded-lg shadow-md">
                            <h3 class="font-bold text-lg mb-1 text-slate-900 dark:text-white">Diagnóstico e Planejamento</h3>
                            <p class="text-gray-600 dark:text-gray-400">Entendemos seus desafios, processos e metas para desenhar uma estratégia de automação sob medida.</p>
                        </div>
                    </div>

                    <!-- Item 2 -->
                    <div class="mb-8 flex md:justify-between md:items-center w-full">
                         <div class="md:w-5/12 hidden md:flex justify-center items-center">
                            <div class="w-32 h-32 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                                </svg>
                            </div>
                         </div>
                         <div class="z-10 flex items-center bg-orange-500 shadow-xl w-8 h-8 rounded-full">
                            <h1 class="mx-auto text-white font-semibold text-lg">2</h1>
                        </div>
                        <div class="bg-slate-100 dark:bg-slate-700 md:w-5/12 p-6 rounded-lg shadow-md">
                            <h3 class="font-bold text-lg mb-1 text-slate-900 dark:text-white">Desenvolvimento e Integração</h3>
                            <p class="text-gray-600 dark:text-gray-400">Nossa equipe desenvolve a solução e a integra de forma transparente com suas ferramentas atuais.</p>
                        </div>
                    </div>
                    
                    <!-- Item 3 -->
                    <div class="mb-8 flex md:justify-between md:items-center w-full md:flex-row-reverse">
                         <div class="md:w-5/12 hidden md:flex justify-center items-center">
                             <div class="w-32 h-32 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                         </div>
                         <div class="z-10 flex items-center bg-orange-500 shadow-xl w-8 h-8 rounded-full">
                            <h1 class="mx-auto font-semibold text-lg text-white">3</h1>
                        </div>
                         <div class="bg-slate-100 dark:bg-slate-700 md:w-5/12 p-6 rounded-lg shadow-md">
                            <h3 class="font-bold text-lg mb-1 text-slate-900 dark:text-white">Testes e Validação</h3>
                            <p class="text-gray-600 dark:text-gray-400">Realizamos testes rigorosos para garantir que tudo funcione perfeitamente antes do lançamento oficial.</p>
                        </div>
                    </div>

                    <!-- Item 4 -->
                    <div class="mb-8 flex md:justify-between md:items-center w-full">
                         <div class="md:w-5/12 hidden md:flex justify-center items-center">
                            <div class="w-32 h-32 bg-slate-100 dark:bg-slate-700 rounded-full flex items-center justify-center shadow-md">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                </svg>
                            </div>
                         </div>
                         <div class="z-10 flex items-center bg-orange-500 shadow-xl w-8 h-8 rounded-full">
                            <h1 class="mx-auto text-white font-semibold text-lg">4</h1>
                        </div>
                         <div class="bg-slate-100 dark:bg-slate-700 md:w-5/12 p-6 rounded-lg shadow-md">
                            <h3 class="font-bold text-lg mb-1 text-slate-900 dark:text-white">Otimização e Suporte</h3>
                            <p class="text-gray-600 dark:text-gray-400">Monitoramos a performance, colhemos feedback e otimizamos a solução continuamente, com suporte dedicado.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal de Serviço -->
    <div id="service-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-50">
        <div class="bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto relative">
            <button id="close-service-modal-button" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-4xl font-light leading-none">&times;</button>
            <img id="service-modal-image" src="" alt="Ilustração do Serviço" class="w-full h-56 object-cover rounded-t-lg">
            <div class="p-8 md:p-12">
                <h2 id="service-modal-title" class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white"></h2>
                <p id="service-modal-description" class="mt-4 text-gray-600 dark:text-gray-400"></p>
                <div class="mt-6 pt-6 border-t border-slate-200 dark:border-slate-700">
                    <h3 class="text-lg font-semibold text-slate-900 dark:text-white">Exemplos de Aplicação:</h3>
                    <ul id="service-modal-examples" class="mt-4 space-y-3 text-gray-600 dark:text-gray-400 list-disc list-inside">
                        <!-- Exemplos serão inseridos aqui -->
                    </ul>
                </div>
            </div>
        </div>
    </div>


    <!-- Modal de Contato -->
    <div id="contact-modal" class="hidden fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative">
            <!-- Botão de Fechar -->
            <button id="close-modal-button" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-4xl font-light leading-none">&times;</button>
            
            <div class="p-8 md:p-12 lg:flex lg:items-start lg:gap-x-12">
                 <div class="lg:w-2/5">
                    <h2 class="text-2xl sm:text-3xl font-bold text-slate-900 dark:text-white">Vamos Conversar Sobre Seu Projeto?</h2>
                    <p class="mt-4 text-gray-600 dark:text-gray-400">Preencha o formulário para agendarmos uma demonstração gratuita. Nossa equipe está pronta para entender sua necessidade e propor a melhor solução.</p>
                    
                    <div class="mt-8 pt-6 border-t border-slate-200 dark:border-slate-700">
                        <h3 class="text-lg font-semibold text-slate-900 dark:text-white">Ao agendar uma conversa, você irá:</h3>
                        <ul class="mt-4 space-y-3 text-gray-600 dark:text-gray-400">
                            <li class="flex items-start">
                                <svg class="w-5 h-5 mr-3 text-orange-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>Receber uma análise gratuita do seu cenário atual e pontos de melhoria.</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 mr-3 text-orange-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>Descobrir o potencial de automação específico para o seu negócio.</span>
                            </li>
                            <li class="flex items-start">
                                <svg class="w-5 h-5 mr-3 text-orange-500 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                                <span>Ver uma demonstração ao vivo das nossas ferramentas em ação, sem compromisso.</span>
                            </li>
                        </ul>
                    </div>

                    <div class="mt-8">
                        <p class="flex items-center text-gray-700 dark:text-gray-300">
                            <svg class="w-5 h-5 mr-2 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                            cortex.duo.ia@gmail.com
                        </p>
                    </div>
                </div>
                <div class="mt-8 lg:mt-0 lg:w-3/5">
                    <div id="form-container">
                        <form id="contact-form" class="space-y-4">
                            <!-- Ação do formulário será tratada via JS -->

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="modal-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Nome</label>
                                    <input type="text" id="modal-name" name="name" class="mt-1 block w-full bg-slate-50 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-2" required>
                                </div>
                                <div>
                                    <label for="modal-company" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Empresa</label>
                                    <input type="text" id="modal-company" name="company" class="mt-1 block w-full bg-slate-50 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-2" required>
                                </div>
                            </div>
                            
                             <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Tipo de E-mail</label>
                                <div class="mt-2 flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-300">
                                    <label class="flex items-center"><input type="radio" name="email_type" value="pessoal" class="focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 dark:border-slate-600 dark:bg-slate-700" required> <span class="ml-2">Pessoal</span></label>
                                    <label class="flex items-center"><input type="radio" name="email_type" value="profissional" class="focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 dark:border-slate-600 dark:bg-slate-700"> <span class="ml-2">Profissional</span></label>
                                </div>
                            </div>
                            <div>
                                <label for="modal-email" class="block text-sm font-medium text-gray-700 dark:text-gray-300">E-mail</label>
                                <input type="email" id="modal-email" name="email" class="mt-1 block w-full bg-slate-50 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-2" required>
                            </div>
                           
                             <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Tipo de WhatsApp</label>
                                <div class="mt-2 flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-300">
                                    <label class="flex items-center"><input type="radio" name="whatsapp_type" value="comum" class="focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 dark:border-slate-600 dark:bg-slate-700" required> <span class="ml-2">Comum</span></label>
                                    <label class="flex items-center"><input type="radio" name="whatsapp_type" value="business" class="focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 dark:border-slate-600 dark:bg-slate-700"> <span class="ml-2">Business</span></label>
                                </div>
                            </div>
                             <div>
                                <label for="modal-whatsapp" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Número de WhatsApp</label>
                                <input type="tel" id="modal-whatsapp" name="whatsapp" class="mt-1 block w-full bg-slate-50 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-2" placeholder="(XX) XXXXX-XXXX" required>
                            </div>
                           
                            <div>
                                <label for="modal-service" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Serviço de Interesse</label>
                                <select id="modal-service" name="service" class="mt-1 block w-full bg-slate-50 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-2" required>
                                    <option value="">Selecione um serviço</option>
                                    <option>Chatbots (Atendimento, Vendas, Leads)</option>
                                    <option>Automação de Processos (RPA)</option>
                                    <option>IA para E-commerce</option>
                                    <option>Análise Preditiva e Dados</option>
                                    <option>Integração com Sistemas</option>
                                    <option>Outro</option>
                                </select>
                            </div>

                            <!-- Normal Message Container -->
                            <div id="message-container">
                                <label for="modal-message" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Sua mensagem, me diga mais sobre o que deseja</label>
                                <textarea id="modal-message" name="message" rows="4" class="mt-1 block w-full bg-slate-50 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-2"></textarea>
                                <p id="message-error" class="text-red-500 text-sm mt-1 hidden"></p>
                            </div>
                            
                            <!-- Idea Message Container (initially hidden) -->
                            <div id="idea-message-container" class="hidden space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Ideia de Automação Selecionada:</label>
                                    <div id="selected-idea-display" class="mt-1 block w-full bg-slate-100 dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md p-3 text-sm">
                                        <!-- Idea content injected by JS -->
                                    </div>
                                </div>

                                <div>
                                    <label class="flex items-center cursor-pointer">
                                        <input type="checkbox" id="add-extra-message-checkbox" class="focus:ring-orange-500 h-4 w-4 text-orange-600 border-gray-300 rounded">
                                        <span class="ml-2 text-sm text-gray-600 dark:text-gray-300">Adicionar uma mensagem complementar?</span>
                                    </label>
                                </div>

                                <div id="extra-message-wrapper" class="hidden">
                                     <label for="extra-message-textarea" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Sua mensagem adicional:</label>
                                    <textarea id="extra-message-textarea" name="extra_message" rows="3" class="mt-1 block w-full bg-slate-50 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-2"></textarea>
                                    <p id="extra-message-error" class="text-red-500 text-sm mt-1 hidden"></p>
                                </div>
                            </div>

                            <div class="pt-2">
                                <button type="submit" id="submit-button" class="w-full bg-orange-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-orange-600 transition-colors">
                                    Enviar Mensagem
                                </button>
                            </div>
                        </form>
                    </div>
                    <div id="success-message-container" class="hidden text-center py-16">
                        <svg class="w-16 h-16 mx-auto text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <h3 class="text-2xl font-bold text-slate-900 dark:text-white mt-4">Mensagem Enviada!</h3>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">Obrigado por entrar em contato. Retornaremos em breve.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Rodapé -->
    <footer class="bg-slate-900/95 backdrop-blur-sm">
        <div class="container mx-auto px-6 py-8 text-center text-gray-400">
            <p>&copy; 2024 Cortex Duo. Todos os direitos reservados.</p>
            <p class="text-sm mt-1">Transformando negócios com inteligência.</p>
        </div>
    </footer>
    
    <!-- Widget de Chatbot -->
    <div class="fixed bottom-5 right-5 z-50">
        <!-- Botão do Widget -->
        <button id="chat-widget-button" class="bg-orange-500 text-white rounded-full shadow-lg w-16 h-16 flex items-center justify-center hover:bg-orange-600 transition-transform hover:scale-110">
             <svg xmlns="http://www.w3.org/2000/svg" id="chat-icon-open" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
            </svg>
        </button>
        <!-- Janela do Chat (escondida por padrão) -->
        <div id="chat-widget-window" class="absolute bottom-20 right-0 w-80 sm:w-96 bg-white dark:bg-slate-800 rounded-lg shadow-2xl border dark:border-slate-700 flex flex-col" style="height: 32rem;">
            <div class="bg-slate-900 text-white p-4 rounded-t-lg flex justify-between items-center">
                <h3 class="font-bold">Assistente Virtual</h3>
                <button id="close-chat-widget" class="text-gray-300 hover:text-white text-2xl leading-none">&times;</button>
            </div>
            <div id="ai-chat-messages" class="flex-1 p-4 overflow-y-auto text-sm space-y-3">
                 <!-- Mensagens da IA serão inseridas aqui -->
            </div>
            <div class="p-2 border-t dark:border-slate-700 flex items-center">
                <input type="text" id="ai-chat-input" placeholder="Digite sua mensagem..." class="w-full bg-slate-100 dark:bg-slate-700 border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:ring-orange-500 focus:border-orange-500 p-2 text-sm">
                <button id="ai-send-button" class="ml-2 p-2 bg-orange-500 text-white rounded-md hover:bg-orange-600">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                      <path d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z" />
                    </svg>
                </button>
            </div>
        </div>
    </div>


    <script>
        const apiKey = ""; // Chave de API do Gemini (deixe em branco)

        // Script para menu mobile
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        const mobileMenuLinks = mobileMenu.querySelectorAll('a');
        mobileMenuLinks.forEach(link => {
            if (link.getAttribute('href') !== '#contact') {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                });
            }
        });

        // Script para Widget de Chat IA
        const chatWidgetButton = document.getElementById('chat-widget-button');
        const chatWidgetWindow = document.getElementById('chat-widget-window');
        const closeChatWidgetButton = document.getElementById('close-chat-widget');
        const aiChatMessages = document.getElementById('ai-chat-messages');
        const aiChatInput = document.getElementById('ai-chat-input');
        const aiSendButton = document.getElementById('ai-send-button');
        let chatHistory = [];

        chatWidgetButton.addEventListener('click', () => {
            chatWidgetWindow.classList.toggle('active');
        });
        closeChatWidgetButton.addEventListener('click', () => {
            chatWidgetWindow.classList.remove('active');
        });
        
        const addMessage = (messageData, sender) => {
            const messageDiv = document.createElement('div');
            
            if (sender === 'user') {
                messageDiv.textContent = messageData.text;
                messageDiv.className = 'bg-gray-200 dark:bg-slate-600 text-gray-800 dark:text-gray-200 p-2 rounded-lg rounded-br-none ml-auto max-w-[85%] mb-2 text-right break-words';
            } else { // sender === 'ai'
                const textNode = document.createElement('span');
                
                // Parse for button token
                const buttonRegex = /\[BUTTON:(.+?)\|(.+?)\]/g;
                const buttonMatch = buttonRegex.exec(messageData.text);
                
                let cleanText = messageData.text;

                if(buttonMatch){
                    cleanText = messageData.text.replace(buttonRegex, '').trim();
                }

                textNode.textContent = cleanText;
                messageDiv.appendChild(textNode);
                messageDiv.className = 'bg-orange-500 text-white p-2 rounded-lg rounded-bl-none max-w-[85%] mb-2 break-words';

                if (buttonMatch) {
                    const [, buttonText, buttonLink] = buttonMatch;
                    const button = document.createElement('button');
                    button.textContent = buttonText;
                    button.className = 'block w-full text-left bg-orange-400 dark:bg-orange-600 hover:bg-orange-300 dark:hover:bg-orange-500 rounded-md p-2 mt-2 font-semibold transition-colors text-sm';
                    button.onclick = () => {
                        if (buttonLink === '#contact') {
                            contactModal.classList.remove('hidden');
                        } else {
                            const targetElement = document.querySelector(buttonLink);
                            if (targetElement) {
                                targetElement.scrollIntoView({ behavior: 'smooth' });
                            }
                        }
                        chatWidgetWindow.classList.remove('active'); // Fecha o chat
                    };
                    messageDiv.appendChild(button);
                }
            }
            aiChatMessages.appendChild(messageDiv);
            aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
        };
        
        async function getGeminiResponse(prompt) {
             const systemPrompt = "Você é Cortez, o assistente virtual da Cortex Duo, uma empresa especialista em automação com Inteligência Artificial. Sua personalidade é prestativa, profissional e entusiasmada com tecnologia. Sua missão é ajudar os usuários a entenderem os serviços da Cortex Duo e guiá-los pelo site. Mantenha as respostas concisas (no máximo 3 frases). Se a pergunta for sobre serviços, exemplos, preços ou contato, inclua no final da sua resposta o token especial [BUTTON:Texto do Botão|#id-da-secao]. Os IDs disponíveis são: #services, #brainstorm, #examples, #cases, #process, #contact. Não invente informações. Se não souber a resposta, diga que é um assistente virtual com conhecimento limitado e sugira que o usuário entre em contato com a equipe usando o token [BUTTON:Fale com a equipe|#contact].";

            let apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent`;
             if (apiKey) {
                apiUrl += `?key=${apiKey}`;
            }
            
            const payload = {
                contents: [...chatHistory, { parts: [{ text: prompt }] }],
                 systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    console.error("API Error:", response.status, await response.text());
                    return "Desculpe, estou com problemas para me conectar no momento. Por favor, tente novamente mais tarde.";
                }

                const result = await response.json();
                const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (text) {
                    // Update history
                    chatHistory.push({ role: 'user', parts: [{ text: prompt }] });
                    chatHistory.push({ role: 'model', parts: [{ text: text }] });
                    return text;
                } else {
                     return "Não consegui gerar uma resposta. Tente reformular sua pergunta.";
                }
            } catch(error) {
                console.error("Fetch Error:", error);
                return "Ocorreu um erro de conexão. Verifique sua rede e tente novamente.";
            }
        }

        const handleSendMessage = async () => {
            const userInput = aiChatInput.value.trim();
            if (userInput) {
                addMessage({ text: userInput }, 'user');
                aiChatInput.value = '';
                
                const typingIndicator = document.createElement('div');
                typingIndicator.textContent = 'digitando...';
                typingIndicator.className = 'text-gray-400 text-xs italic p-2';
                aiChatMessages.appendChild(typingIndicator);
                aiChatMessages.scrollTop = aiChatMessages.scrollHeight;

                const aiResponse = await getGeminiResponse(userInput);

                aiChatMessages.removeChild(typingIndicator);
                addMessage({text: aiResponse}, 'ai');
            }
        };

        aiSendButton.addEventListener('click', handleSendMessage);
        aiChatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleSendMessage();
            }
        });
        
         // Add initial AI message
        setTimeout(() => {
            const initialAiMessage = 'Olá! Sou o Cortez, assistente virtual da Cortex Duo. Como posso te ajudar a inovar hoje?';
            addMessage({ text: initialAiMessage }, 'ai');
            chatHistory.push({ role: 'model', parts: [{ text: initialAiMessage }] });
        }, 1000);


        // SCRIPT PARA MODAL DE CONTATO
        const contactModal = document.getElementById('contact-modal');
        const closeModalButton = document.getElementById('close-modal-button');
        const openModalButtons = document.querySelectorAll('a[href="#contact"]');
        const contactForm = document.getElementById('contact-form');
        const formContainer = document.getElementById('form-container');
        const successMessageContainer = document.getElementById('success-message-container');
        const messageTextarea = document.getElementById('modal-message');
        const messageError = document.getElementById('message-error');
        const submitButton = document.getElementById('submit-button');

        const messageContainer = document.getElementById('message-container');
        const ideaMessageContainer = document.getElementById('idea-message-container');
        const selectedIdeaDisplay = document.getElementById('selected-idea-display');
        const addExtraMessageCheckbox = document.getElementById('add-extra-message-checkbox');
        const extraMessageWrapper = document.getElementById('extra-message-wrapper');
        const extraMessageTextarea = document.getElementById('extra-message-textarea');
        const extraMessageError = document.getElementById('extra-message-error');

        const validateMessage = (message) => {
            const lowerCaseMessage = message.toLowerCase();
            const spamKeywords = ['viagra', 'grátis', 'oferta', 'promoção', 'imperdível', 'clique aqui', 'renda extra', 'dinheiro fácil'];

            if (message.length < 15) {
                return { isValid: false, error: 'Sua mensagem é muito curta. Por favor, detalhe um pouco mais.' };
            }
            if (/(.)\1{5,}/.test(message)) {
                return { isValid: false, error: 'Sua mensagem parece conter texto repetido sem sentido.' };
            }
            for (const keyword of spamKeywords) {
                if (lowerCaseMessage.includes(keyword)) {
                    return { isValid: false, error: 'Sua mensagem parece ser spam. Por favor, reformule.' };
                }
            }
             if (!/[a-z]{3,}/i.test(message)) { // Pelo menos uma palavra com 3+ letras
                 return { isValid: false, error: 'Por favor, escreva uma mensagem mais clara.' };
            }
            
            return { isValid: true, error: '' };
        };

        function resetContactForm() {
            contactForm.reset();
            formContainer.classList.remove('hidden');
            successMessageContainer.classList.add('hidden');
            messageContainer.classList.remove('hidden');
            ideaMessageContainer.classList.add('hidden');
            extraMessageWrapper.classList.add('hidden');
            addExtraMessageCheckbox.checked = false;
            messageError.classList.add('hidden');
            extraMessageError.classList.add('hidden');
            // Make sure the required attribute is on the correct textarea
            messageTextarea.required = true;
            extraMessageTextarea.required = false;
        }

        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            let finalMessageContent = '';
            let isFormValid = true;
            let validationResult;

            // Check which form mode is active
            if (!ideaMessageContainer.classList.contains('hidden')) { // Idea mode
                const ideaTitle = selectedIdeaDisplay.querySelector('strong').textContent;
                const ideaDescription = selectedIdeaDisplay.querySelector('p').textContent;
                finalMessageContent = `Tenho interesse na seguinte ideia de automação:\n\nTítulo: ${ideaTitle}\nDescrição: ${ideaDescription}`;
                
                if (addExtraMessageCheckbox.checked) {
                    const extraMessage = extraMessageTextarea.value;
                    validationResult = validateMessage(extraMessage);
                    if (!validationResult.isValid) {
                        extraMessageError.textContent = validationResult.error;
                        extraMessageError.classList.remove('hidden');
                        isFormValid = false;
                    } else {
                        extraMessageError.classList.add('hidden');
                        finalMessageContent += `\n\n---\n\nMensagem Adicional:\n${extraMessage}`;
                    }
                }
            } else { // Normal mode
                const message = messageTextarea.value;
                validationResult = validateMessage(message);
                if (!validationResult.isValid) {
                    messageError.textContent = validationResult.error;
                    messageError.classList.remove('hidden');
                    isFormValid = false;
                } else {
                    messageError.classList.add('hidden');
                    finalMessageContent = message;
                }
            }

            if (!isFormValid) {
                return;
            }
            
            submitButton.disabled = true;
            submitButton.textContent = 'Enviando...';
            
            const baseFormData = new FormData(contactForm);
            const finalFormData = new FormData();

            // Append all fields except the message textareas
            for (let [key, value] of baseFormData.entries()) {
                 if (key !== 'message' && key !== 'extra_message') {
                    finalFormData.append(key, value);
                }
            }
            finalFormData.append('message', finalMessageContent);

            const formAction = 'https://formsubmit.co/cortex.duo.ia@gmail.com';
            
            try {
                const response = await fetch(formAction, {
                    method: 'POST',
                    body: finalFormData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    formContainer.classList.add('hidden');
                    successMessageContainer.classList.remove('hidden');

                    setTimeout(() => {
                        closeModal();
                         setTimeout(() => {
                            resetContactForm();
                        }, 500);
                    }, 3000);
                } else {
                    throw new Error('Falha no envio');
                }
            } catch (error) {
                messageError.textContent = 'Ocorreu um erro ao enviar. Tente novamente mais tarde.';
                messageError.classList.remove('hidden');
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = 'Enviar Mensagem';
            }
        });


        openModalButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                e.preventDefault();
                resetContactForm();
                contactModal.classList.remove('hidden');
                mobileMenu.classList.add('hidden');
            });
        });

        const closeModal = () => {
            contactModal.classList.add('hidden');
        }

        closeModalButton.addEventListener('click', closeModal);

        contactModal.addEventListener('click', (e) => {
            if (e.target === contactModal) {
                closeModal();
            }
        });
        
        addExtraMessageCheckbox.addEventListener('change', () => {
            const isChecked = addExtraMessageCheckbox.checked;
            extraMessageWrapper.classList.toggle('hidden', !isChecked);
            extraMessageTextarea.required = isChecked;
        });

        // NOVO SCRIPT PARA MODAL DE SERVIÇOS
        const serviceModal = document.getElementById('service-modal');
        const serviceCards = document.querySelectorAll('.service-card');
        const closeServiceModalButton = document.getElementById('close-service-modal-button');
        const serviceModalTitle = document.getElementById('service-modal-title');
        const serviceModalImage = document.getElementById('service-modal-image');
        const serviceModalDescription = document.getElementById('service-modal-description');
        const serviceModalExamples = document.getElementById('service-modal-examples');

        const servicesContent = {
            atendimento: {
                title: 'Chatbots de Atendimento 24/7',
                image: 'https://placehold.co/600x400/0a192f/f97316?text=Atendimento',
                description: 'Nossos chatbots de atendimento são projetados para serem a primeira linha de suporte da sua empresa. Eles operam 24/7, resolvendo instantaneamente as dúvidas mais comuns dos seus clientes, coletando informações importantes e, quando necessário, transferindo a conversa para um atendente humano de forma inteligente e sem atritos. Isso reduz o tempo de espera, aumenta a satisfação do cliente e libera sua equipe para focar em casos mais complexos.',
                examples: [
                    'Respostas automáticas a FAQs (Dúvidas Frequentes).',
                    'Abertura e consulta de status de tickets de suporte.',
                    'Guia de solução de problemas básicos (troubleshooting).',
                    'Coleta de feedback e pesquisas de satisfação pós-atendimento.'
                ]
            },
            vendas: {
                title: 'Chatbots para Vendas e Leads',
                image: 'https://placehold.co/600x400/0a192f/f97316?text=Vendas',
                description: 'Transforme visitantes do seu site em clientes potenciais. Nossos chatbots de vendas agem como um assistente proativo, engajando usuários, entendendo suas necessidades através de perguntas qualificatórias e guiando-os pela jornada de compra. Eles podem agendar demonstrações, coletar informações de contato e até mesmo fechar vendas simples, tudo de forma automática.',
                examples: [
                    'Qualificação de leads com perguntas sobre orçamento, necessidade e prazo.',
                    'Agendamento automático de reuniões na agenda da equipe de vendas.',
                    'Recomendação de produtos com base nas respostas do usuário.',
                    'Recuperação de carrinhos de compra abandonados com ofertas especiais.'
                ]
            },
            rpa: {
                title: 'Automação de Processos (RPA)',
                image: 'https://placehold.co/600x400/0a192f/f97316?text=RPA',
                description: "A Automação de Processos Robóticos (RPA) utiliza 'robôs' de software para executar tarefas repetitivas e baseadas em regras que antes eram feitas por humanos. Isso elimina o erro humano, acelera a execução de processos de back-office e libera seus colaboradores para atividades mais estratégicas e de maior valor para o negócio.",
                examples: [
                    'Preenchimento automático de planilhas e sistemas.',
                    'Extração de dados de e-mails, PDFs e sites.',
                    'Migração de dados entre sistemas que não possuem integração nativa.',
                    'Processamento de faturas e ordens de compra.'
                ]
            },
            ecommerce: {
                title: 'IA para E-commerce',
                image: 'https://placehold.co/600x400/0a192f/f97316?text=E-commerce',
                description: 'Potencialize sua loja virtual com inteligência artificial. Nossas soluções para e-commerce vão além do básico, criando experiências de compra personalizadas que aumentam a conversão e a fidelidade do cliente. Analisamos o comportamento do consumidor para oferecer o produto certo na hora certa.',
                examples: [
                    "Sistemas de recomendação de produtos ('Quem comprou X, também comprou Y').",
                    'Busca inteligente que entende a linguagem natural do cliente.',
                    'Chatbots para rastreio de pedidos e gestão de trocas/devoluções.',
                    'Personalização da vitrine da loja para cada usuário.'
                ]
            },
            dados: {
                title: 'Análise Preditiva e Dados',
                image: 'https://placehold.co/600x400/0a192f/f97316?text=Dados',
                description: 'Pare de reagir e comece a antecipar. Nossas soluções de análise preditiva usam algoritmos de machine learning para analisar seus dados históricos e identificar padrões, tendências e probabilidades futuras. Isso permite que sua empresa tome decisões mais informadas, otimize o estoque, preveja a demanda e identifique riscos antes que eles aconteçam.',
                examples: [
                    'Previsão de demanda de produtos para otimização de estoque.',
                    'Análise de risco de churn (cancelamento) de clientes.',
                    'Identificação de oportunidades de cross-sell e upsell.',
                    'Modelagem de precificação dinâmica.'
                ]
            },
            integracao: {
                title: 'Integração com Sistemas',
                image: 'https://placehold.co/600x400/0a192f/f97316?text=Integrações',
                description: 'Uma automação eficiente depende de um ecossistema conectado. Garantimos que nossas soluções de IA e chatbots se comuniquem perfeitamente com as ferramentas que sua empresa já utiliza, como CRMs, ERPs, plataformas de e-commerce e APIs de terceiros. Criamos um fluxo de trabalho unificado, sem silos de informação.',
                examples: [
                    'Sincronização de leads capturados pelo chatbot com seu CRM (Salesforce, HubSpot, etc.).',
                    'Abertura automática de pedidos no seu sistema ERP.',
                    'Consulta de estoque em tempo real durante uma conversa com o cliente.',
                    'Conexão com gateways de pagamento para finalizar compras no chat.'
                ]
            }
        };

        serviceCards.forEach(card => {
            card.addEventListener('click', () => {
                const serviceKey = card.dataset.service;
                const content = servicesContent[serviceKey];

                serviceModalTitle.textContent = content.title;
                serviceModalImage.src = content.image;
                serviceModalDescription.textContent = content.description;
                
                serviceModalExamples.innerHTML = ''; // Limpa exemplos anteriores
                content.examples.forEach(exampleText => {
                    const li = document.createElement('li');
                    li.textContent = exampleText;
                    serviceModalExamples.appendChild(li);
                });

                serviceModal.classList.remove('hidden');
            });
        });

        const closeServiceModal = () => {
            serviceModal.classList.add('hidden');
        };

        closeServiceModalButton.addEventListener('click', closeServiceModal);
        serviceModal.addEventListener('click', (e) => {
            if(e.target === serviceModal) {
                closeServiceModal();
            }
        });


        // SCRIPT PARA DEMONSTRAÇÃO DE CHAT
        const planSelectors = document.querySelectorAll('.plan-selector');
        const inteligenteOptions = document.getElementById('inteligente-options');
        const levelSelectors = document.querySelectorAll('.level-selector');
        const chatMessages = document.getElementById('chat-messages');
        const demoTitle = document.getElementById('demo-title');
        const demoDescription = document.getElementById('demo-description');
        const dynamicDescriptionText = document.getElementById('dynamic-description-text');

        let currentPlan = 'essencial';
        let currentLevel = 1;

        const planDescriptions = {
            essencial: 'Este plano utiliza um chatbot baseado em regras fixas. É ideal para responder perguntas frequentes (FAQs) e executar tarefas simples com um fluxo pré-definido.',
            inteligente: {
                1: 'Este nível compreende texto, áudio e imagens, respondendo de forma inteligente e contextual. O bot pode manter conversas mais complexas e entender a intenção do usuário.',
                2: 'Além de todas as capacidades do Nível 1, este chatbot pode realizar e receber ligações, e também gravar e enviar mensagens de áudio, oferecendo uma experiência de comunicação completa.'
            }
        };

        const chatContent = {
            essencial: {
                title: 'Demonstração: Plano Essencial',
                description: 'Baseado em regras. Não interpreta áudio, imagens ou texto fora do script.',
                messages: `
                    <div class="bg-blue-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs">Olá! Como posso ajudar?</div>
                    <div class="bg-gray-300 text-gray-800 p-2 rounded-lg rounded-br-none ml-auto max-w-xs">qual o horario de vcs?</div>
                    <div class="bg-blue-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs">Não entendi. Por favor, escolha uma opção: <br>1. Nossos Serviços <br>2. Falar com Atendente</div>
                `
            },
            inteligente: {
                1: {
                    title: 'Demonstração: Inteligente Nível 1',
                    description: 'Compreende linguagem natural, interpreta áudio e imagens.',
                    messages: `
                        <div class="bg-orange-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs">Olá! Como posso ajudar?</div>
                        <div class="bg-gray-300 text-gray-800 p-2 rounded-lg rounded-br-none ml-auto max-w-xs flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 017 8a1 1 0 10-2 0 7.001 7.001 0 006 6.93V17H9a1 1 0 100 2h2a1 1 0 100-2h-1v-2.07z" clip-rule="evenodd" /></svg>
                            <span>Mensagem de áudio</span>
                        </div>
                        <div class="bg-orange-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs italic text-sm opacity-75">digitando...</div>
                        <div class="bg-orange-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs">Entendi que você perguntou sobre nosso horário de funcionamento por áudio. Estamos abertos de segunda a sexta, das 9h às 18h.</div>
                    `
                },
                2: {
                    title: 'Demonstração: Inteligente Nível 2',
                    description: 'Todos os recursos do Nível 1, mais a capacidade de gravar e enviar áudios, além de realizar/receber ligações.',
                     messages: `
                        <div class="bg-orange-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs">Olá! Como posso ajudar?</div>
                        <div class="bg-gray-300 text-gray-800 p-2 rounded-lg rounded-br-none ml-auto max-w-xs">qual o horario de vcs?</div>
                        <div class="bg-orange-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs italic text-sm opacity-75">gravando áudio...</div>
                        <div class="bg-orange-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs flex items-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" /></svg>
                            <span>0:05</span>
                        </div>
                         <div class="bg-orange-500 text-white p-2 rounded-lg rounded-bl-none max-w-xs">Se preferir, também posso te ligar.</div>
                    `
                }
            }
        };

        function updateChatDemoAndDescription() {
            let chat, description;
            if (currentPlan === 'essencial') {
                chat = chatContent.essencial;
                description = planDescriptions.essencial;
            } else {
                chat = chatContent.inteligente[currentLevel];
                description = planDescriptions.inteligente[currentLevel];
            }
            demoTitle.textContent = chat.title;
            demoDescription.textContent = chat.description;
            chatMessages.innerHTML = chat.messages;
            dynamicDescriptionText.textContent = description;
        }

        planSelectors.forEach(button => {
            button.addEventListener('click', () => {
                currentPlan = button.dataset.plan;
                
                planSelectors.forEach(btn => {
                    btn.classList.remove('bg-orange-500', 'text-white');
                    btn.classList.add('text-gray-600', 'dark:text-gray-300');
                });
                button.classList.add('bg-orange-500', 'text-white');
                button.classList.remove('text-gray-600', 'dark:text-gray-300');

                if (currentPlan === 'inteligente') {
                    inteligenteOptions.classList.remove('hidden');
                } else {
                    inteligenteOptions.classList.add('hidden');
                }
                updateChatDemoAndDescription();
            });
        });

        levelSelectors.forEach(button => {
            button.addEventListener('click', () => {
                currentLevel = parseInt(button.dataset.level, 10);
                
                 levelSelectors.forEach(btn => {
                    btn.classList.remove('bg-blue-500', 'text-white');
                    btn.classList.add('text-gray-600', 'dark:text-gray-300');
                });
                button.classList.add('bg-blue-500', 'text-white');
                button.classList.remove('text-gray-600', 'dark:text-gray-300');

                updateChatDemoAndDescription();
            });
        });

        // SCRIPT DO VÍDEO DE FUNDO
        const video = document.getElementById('bg-video');
        const sections = document.querySelectorAll('.page-section');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const time = entry.target.getAttribute('data-video-time');
                    if (video.readyState >= 3) { // Ensure video data is loaded
                        video.currentTime = time;
                    }
                }
            });
        }, { threshold: 0.5 }); // A seção precisa estar 50% visível

        sections.forEach(section => {
            observer.observe(section);
        });

        video.addEventListener('loadedmetadata', function() {
          video.pause();
        });

        // SCRIPT BRAINSTORM IA
        const generateIdeasButton = document.getElementById('generate-ideas-button');
        const businessTypeInput = document.getElementById('business-type-input');
        const ideasOutput = document.getElementById('ideas-output');

        async function generateAutomationIdeas() {
            const businessType = businessTypeInput.value.trim();
            if (!businessType) {
                ideasOutput.innerHTML = `<p class="text-red-500">Por favor, descreva seu tipo de negócio.</p>`;
                return;
            }

            ideasOutput.innerHTML = `<div class="flex justify-center items-center"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-orange-500"></div></div>`;
            generateIdeasButton.disabled = true;

            const systemPrompt = "Você é um consultor de negócios especialista em automação e IA. Sua tarefa é gerar 3 ideias de automação criativas e práticas para o tipo de negócio do usuário. Para cada ideia, forneça um título, uma descrição curta e o principal benefício.";
            const userPrompt = `Tipo de negócio: ${businessType}`;
            
            let apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent`;
            if (apiKey) {
                apiUrl += `?key=${apiKey}`;
            }

            const payload = {
                contents: [{ parts: [{ text: userPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "ARRAY",
                        items: {
                            type: "OBJECT",
                            properties: {
                                "ideia": { "type": "STRING" },
                                "descricao": { "type": "STRING" },
                                "beneficio": { "type": "STRING" }
                            },
                            required: ["ideia", "descricao", "beneficio"]
                        }
                    }
                }
            };

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) {
                    throw new Error('API response was not ok.');
                }

                const result = await response.json();
                const jsonText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                const ideas = JSON.parse(jsonText);

                ideasOutput.innerHTML = '';
                ideas.forEach(idea => {
                    const cardButton = document.createElement('button');
                    cardButton.className = 'idea-card bg-slate-50 dark:bg-slate-900/50 p-6 rounded-lg shadow-md w-full text-left transition hover:border-orange-500 border-l-4 border-transparent';
                    cardButton.innerHTML = `
                        <h4 class="font-bold text-lg text-slate-900 dark:text-white">${idea.ideia}</h4>
                        <p class="text-gray-600 dark:text-gray-400 mt-2">${idea.descricao}</p>
                        <p class="text-sm font-semibold text-orange-500 mt-3"><strong>Benefício Principal:</strong> ${idea.beneficio}</p>
                    `;
                    cardButton.dataset.title = idea.ideia;
                    cardButton.dataset.description = idea.descricao;

                    cardButton.addEventListener('click', () => {
                        resetContactForm();
                        messageContainer.classList.add('hidden');
                        ideaMessageContainer.classList.remove('hidden');
                        messageTextarea.required = false;

                        selectedIdeaDisplay.innerHTML = `
                            <strong class="font-semibold text-slate-800 dark:text-white">${cardButton.dataset.title}</strong>
                            <p class="mt-1 text-gray-600 dark:text-gray-400">${cardButton.dataset.description}</p>
                        `;
                        
                        document.getElementById('modal-service').value = "Outro";

                        contactModal.classList.remove('hidden');
                    });

                    ideasOutput.appendChild(cardButton);
                });

            } catch (error) {
                console.error("Error generating ideas:", error);
                ideasOutput.innerHTML = `<p class="text-red-500">Desculpe, não foi possível gerar as ideias. Tente novamente.</p>`;
            } finally {
                generateIdeasButton.disabled = false;
            }
        }

        generateIdeasButton.addEventListener('click', generateAutomationIdeas);
        businessTypeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                generateAutomationIdeas();
            }
        });


        // Initial load
        updateChatDemoAndDescription();

    </script>
</body>
</html>
